# https://www.elastic.co/guide/en/beats/heartbeat/current/running-on-docker.html

heartbeat.config.monitors:
    path: ./monitor*.yml
    # update monitors dynamically without restart
    reload.enabled: true
    reload.period: 5s

heartbeat.monitors:
    - type: http
      enabled: true
      id: searxng
      name: searxng
      urls:
          - "https://searxng.glad-pi.uk"
      # not only check if response, everything should be fine too (basic http ok code = 200)
      check.response.status: [200]
      schedule: "@every 1s"

    - type: http
      enabled: true
      id: elastic-rest-api
      name: Elastic REST API
      urls:
          - "http://elasticsearch:9200"
      username: "elastic"
      password: "integration-project-pwd"
      schedule: "@every 1s"

setup.template.settings:
    index.number_of_shards: 1
    index.codec: best_compression
    #_source.enabled: false

setup.kibana:
    host: "https://kibana:5601"

    # Kibana Space ID
    # ID of the Kibana Space into which the dashboards should be loaded. By default,
    # the Default Space will be used.
    #space.id:

output.elasticsearch:
    hosts: ["http://elasticsearch:9200"]
    protocol: "http"

    # Authentication credentials - either API key or username/password.
    # use keystore command to defined ES_API_KEY.
    # For example `/usr/share/packetbeat/bin/packetbeat keystore add ES_API_KEY -c /etc/packetbeat/packetbeat.yml --path.home /usr/share/packetbeat --path.data /var/lib/packetbeat`
    # api_key: "${ES_API_KEY}"
    # TODO change this to a dedicated user: https://www.elastic.co/guide/en/beats/heartbeat/current/privileges-to-publish-events.html or api
    username: "elastic"
    password: "integration-project-pwd"
